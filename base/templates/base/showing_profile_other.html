{% extends 'base.html' %}

{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'style/profile.css' %}">
{% endblock extra_css %}

{% block page_title %}
    <h2>{{ user.username }} is here!</h2>
{% endblock page_title %}

{% block page_content %}

    <div class="profile-container card">
        <div class="row">
            <div class="col">
                <h3>Information</h3>
                <div class="card">
                    <div class="info-container">
                        <p><strong>Username: </strong>{{user.username}}</p>
                        <p><strong>Email: </strong>{{user.email}}</p>
                        <a id="change-password" href="{% url 'change_password' %}">Change password</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <h3>Activity</h3>
                <div class="card">
                    <div class="activity-container">
                        {% for message in messages %}
                            {% if message.chat.status == "open" %}
                                <div class="message-info">
                                    In "{{message.chat.name}}":
                                    <br>
                                    Message: "{{message.body|slice:50}}
                                    {% if message.body|length|get_digit:"-1" > 50 %}
                                        ...
                                    {% endif %}"
                                    <br>
                                    At: {{message.created}}
                                    <br>
                                    <hr>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col">
                <h3>Chats</h3>
                <div class="card">
                    <div class="chat-container">
                        {% for chat in chats %}
                            <div class="chat-name">
                                {% if chat.status == "open" %}
                                <h4><a href="{% url 'chat_details' chat.name chat.id %}">{{chat.name}}</a></h4>
                                {% endif %}
                            </div>
                            <hr>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock page_content %}